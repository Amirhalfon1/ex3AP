<!DOCTYPE html>
<html>
<head>
    <title>The Maze</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="../CSS/mystyle.css">
</head>

<body>

    <div id="navigationDiv"></div>
    <div style="padding:20px;margin-top:30px;background-color:#1abc9c;height:1500px;">

        <!--<form>-->

            <div class="container body-content">
                <h2>Single Player Game</h2><hr />
                <div class="col-sm-4 form-horizontal">
                    <div class="form-group">
                        <label for="mazeName" class="col-sm-2 control-label">Name</label>
                        <div class="col-sm-10">
                            <input type="text" class="form-control" id="mazeName" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="rows" class="col-sm-2 control-label">Rows</label>
                        <div class="col-sm-10">
                            <input type="text" class="form-control" id="rows" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="cols" class="col-sm-2 control-label">Cols</label>
                        <div class="col-sm-10">
                            <input type="text" class="form-control" id="cols" />
                            <br/>
                            <button type="submit" id="startBtn" class="btn btn-default">Start New Game</button>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="cols" class="col-sm-2 control-label">Search Algo</label>
                        <div class="col-sm-10">
                            <select id="algoSelect" name="algo">
                                <option value="0">BFS</option>
                                <option value="1">DFS</option>
                            </select>
                           
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="cols" class="col-sm-2 control-label"></label>
                        <div class="col-sm-10">
                            <button type="submit" id="solveBtn" class="btn btn-default">Solve Maze!</button>
                        </div>
                    </div>



                </div>
                <div class="col-sm-8 text-center">
                    <img class="showWhenWait" id="waitLogo" src="resources/waitForServer.png" hidden="hidden" />
                    <img class="showWhenWait" id="waitGif" src="resources/waiting.gif" hidden="hidden" />
                    <canvas class="showWhenReady" id="mazeCanvas" width="400" height="400" style="border:2px black
                                solid" hidden="hidden" ></canvas>

                    <img id="playerImage" src="resources/player.png" hidden="hidden" />
                    <img id="goalImage" src="resources/goal.png" hidden="hidden" />
                </div>

            </div>
    </div>

    <script src="../Scripts/jquery-3.1.1.js"></script>
    <script src="../Scripts/jQuery.mazePlugin.js"></script>
    <script>
        $('#navigationDiv').load("menuBar.html");
        var maze;
        var myMazeBoard;
        $("#startBtn").on("click", function () {
            $('.showWhenWait').fadeIn("slow", function () { });
                    var name = $('#mazeName').val();
                    console.log(name);
                    var rows = $('#rows').val();
                    var cols = $('#cols').val();
                    url = "../api/SinglePlayerMaze/" + name + "/" + rows + "/" + cols;
                    $.getJSON(url).done(function (mazeFeedback) {
                        $('.showWhenWait').fadeOut("slow", function () {
                            maze = { "Name": mazeFeedback.Name, "Maze": mazeFeedback.Maze, "Rows": mazeFeedback.Rows, "Cols": mazeFeedback.Cols, "Start": mazeFeedback.Start, "Goal": mazeFeedback.End }
                            //$('#bla').append(mazeFeedback.Maze);
                            playerImage = document.getElementById("playerImage");
                            exitImage = document.getElementById("goalImage");
                            myMazeBoard = $('#mazeCanvas').mazePlugin(maze, playerImage, exitImage, true);
                            $('.showWhenReady').fadeIn("slow", function () { });
                        });

                    }).fail(function (jqXHR, textStatus, err) {
                        alert('error ');
                    });
                });

                $("#solveBtn").on("click", function () {
                    var name = maze.Name;
                    var algo = $('#algoSelect').val();
                    url = "../api/SinglePlayerMaze/Solve/" + name + "/" + algo;
                    $.getJSON(url).done(function (solveFeedback) {
                        console.log(solveFeedback["Solution"]);
                        solution = { "Solution": solveFeedback["Solution"] };
                        myMazeBoard.solveMaze(solution);
                        //$('#mazeCanvas').solveMaze(solution);

                    }).fail(function (jqXHR, textStatus, err) {
                        alert('error ');
                    });

                });


    </script>
    <!--</form>-->
</body>
</html>